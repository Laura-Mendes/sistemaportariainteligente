{% extends "base.html" %}

{% block content %}

<!-- Moradores -->
<nav class="navbar" style="padding: 10px 24px;">
  <a class="navbar-brand">
    <div class="navbar-brand fw-bold mt-2" style="font-size: 35px; color: rgb(27, 27, 27);">Sistema de Cadastro</div>
  </a>
</nav>

<main class="container-fluid px-4 fade-in">

<br>

<a href="{{ url_for('moradores_bp.novo') }}" class="btn btn-outline-purple mb-2">
  <i class="bi bi-person-plus ms-1 me-2"></i> Novo Morador
</a>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }} text-center w-50 mx-auto mt-3" style="background-color: #DBEAFF; color: #2f60e6; border: 1px solid #2f60e6;">
        <p style="margin: 0;">{{ message }}</p>
        <button type="button" class="btn-close position-absolute end-0 top-50 translate-middle-y me-2" data-bs-dismiss="alert" aria-label="Fechar"></button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<!-- Tabela dos moradores cadastrados -->

  <div class="table-responsive"
    style="max-height: 500px; overflow-y: auto; border-radius: 8px;"> <!-- SCROLL - Barra de rolagem -->
    <table class="table table-striped table-bordered align-middle">
      <thead class="table" style="font-size: 14px; border: 1px rgba(134, 134, 134, 0.473);">
        <tr>
          <th class="py-3 text-center">ID</th>
          <th class="py-3 text-center">NOME</th>
          <th class="py-3 text-center">TELEFONE</th>   
          <th class="py-3 text-center">EMAIL</th>
          <th class="py-3 text-center">AÇÕES</th>
        </tr>
      </thead>

      <tbody>
            {% for morador in moradores %}
            <tr>
                <td class="py-3">{{ morador.id }}</td>
                <td class="py-3">{{ morador.nome_morador}}</td>
                <td class="py-3">{{ morador.telefone_morador }}</td>
                <td class="py-3">{{ morador.email_morador }}</td>
                
                <td class="text-nowrap">
                   
                    <!-- Botão de exclusão -->
                    <a href="{{ url_for('moradores_bp.excluir', id=morador.id) }}" class="btn btn-dark btn-sm"
                        onclick="return confirm('Tem certeza que deseja excluir?')">
                        <i class="bi bi-trash"></i>
                    </a>

                    <!-- Botão de edição -->
                    <a href="{{ url_for('moradores_bp.editar', id=morador.id) }}" class="btn btn-light btn-sm me-1" style="border-color: #83828238;">
                        <i class="bi bi-pencil"></i>
                    </a>
                </td>
              </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>
</main>

<style>
  @media (max-width: 768px) {
  /* Quebra de linha no título "Sistema de Cadastro" */
  .navbar .navbar-brand .fw-bold {
    white-space: normal !important; /* permite quebra */
    font-size: 28px !important;     /* diminui um pouco */
    line-height: 1.2;
  }
}
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}